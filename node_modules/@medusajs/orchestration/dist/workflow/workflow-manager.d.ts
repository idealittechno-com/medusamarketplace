import { Context, MedusaContainer } from "@medusajs/types";
import { DistributedTransaction, OrchestratorBuilder, TransactionMetadata, TransactionOrchestrator, TransactionStepHandler, TransactionStepsDefinition } from "../transaction";
export interface WorkflowDefinition {
    id: string;
    handler: (container: MedusaContainer, context?: Context) => TransactionStepHandler;
    orchestrator: TransactionOrchestrator;
    flow_: TransactionStepsDefinition;
    handlers_: Map<string, {
        invoke: WorkflowStepHandler;
        compensate?: WorkflowStepHandler;
    }>;
    requiredModules?: Set<string>;
    optionalModules?: Set<string>;
}
export type WorkflowHandler = Map<string, {
    invoke: WorkflowStepHandler;
    compensate?: WorkflowStepHandler;
}>;
export type WorkflowStepHandler = (args: {
    container: MedusaContainer;
    payload: unknown;
    invoke: {
        [actions: string]: unknown;
    };
    compensate: {
        [actions: string]: unknown;
    };
    metadata: TransactionMetadata;
    transaction: DistributedTransaction;
    context?: Context;
}) => unknown;
export declare class WorkflowManager {
    protected static workflows: Map<string, WorkflowDefinition>;
    static unregister(workflowId: string): void;
    static unregisterAll(): void;
    static getWorkflows(): Map<string, WorkflowDefinition>;
    static getWorkflow(workflowId: string): WorkflowDefinition | undefined;
    static getTransactionDefinition(workflowId: any): OrchestratorBuilder;
    static register(workflowId: string, flow: TransactionStepsDefinition | OrchestratorBuilder, handlers: WorkflowHandler, requiredModules?: Set<string>, optionalModules?: Set<string>): void;
    static update(workflowId: string, flow: TransactionStepsDefinition | OrchestratorBuilder, handlers: Map<string, {
        invoke: WorkflowStepHandler;
        compensate?: WorkflowStepHandler;
    }>, requiredModules?: Set<string>, optionalModules?: Set<string>): void;
    static buildHandlers(handlers: Map<string, {
        invoke: WorkflowStepHandler;
        compensate?: WorkflowStepHandler;
    }>): (container: MedusaContainer, context?: Context) => TransactionStepHandler;
}
